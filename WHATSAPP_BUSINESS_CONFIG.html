<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configura√ß√£o do WhatsApp Business API - Credenciais</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            border-radius: 10px;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .step-card {
            background: #f8f9fa;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 5px solid #25D366;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #25D366;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1.2em;
        }

        .step-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .important-note {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
        }

        .warning-note {
            background: #f8d7da;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #dc3545;
            margin: 20px 0;
        }

        .success-note {
            background: #d4edda;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #28a745;
            margin: 20px 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #3498db;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background: #2980b9;
        }

        .field-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }

        .field-info h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 10px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #25D366;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            margin: 10px 5px;
            transition: background 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .btn:hover {
            background: #128C7E;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .footer {
            text-align: center;
            padding: 30px;
            background: #2c3e50;
            color: white;
            border-radius: 15px;
            margin-top: 30px;
        }

        .screenshot {
            text-align: center;
            margin: 20px 0;
        }

        .screenshot img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .field-explanation {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .field-card {
            flex: 1;
            min-width: 300px;
            background: #f1f8ff;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #c8e1ff;
        }

        .field-card h3 {
            color: #0366d6;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .field-explanation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì± Configura√ß√£o do WhatsApp Business API</h1>
            <p>Guia Completo para Obter Business Token e Phone Number ID</p>
        </div>

        <div class="important-note">
            <h3>‚ÑπÔ∏è Informa√ß√£o Importante</h3>
            <p>Para integrar o WhatsApp Voice Agent V2 com o WhatsApp Business API, voc√™ precisa obter credenciais reais do Facebook Business Manager. Este processo √© obrigat√≥rio e n√£o pode ser contornado.</p>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">1</span>
                <span>Criar Conta no Facebook Business Manager</span>
            </div>
            
            <ol>
                <li>Acesse <a href="https://business.facebook.com/" target="_blank">Facebook Business Manager</a></li>
                <li>Clique em "Criar Conta" ou "Criar Uma P√°gina"</li>
                <li>Preencha as informa√ß√µes solicitadas:
                    <ul>
                        <li>Nome da sua empresa</li>
                        <li>Nome do administrador da conta</li>
                        <li>Informa√ß√µes de contato</li>
                    </ul>
                </li>
                <li>Verifique seu e-mail e n√∫mero de telefone</li>
            </ol>
            
            <div class="screenshot">
                <p><em>Tela de cria√ß√£o do Business Manager</em></p>
            </div>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">2</span>
                <span>Verificar sua Conta Business</span>
            </div>
            
            <ol>
                <li>Adicione um m√©todo de pagamento √† sua conta Business</li>
                <li>Verifique sua identidade seguindo as instru√ß√µes do Facebook</li>
                <li>Aguarde a aprova√ß√£o da sua conta Business (pode levar alguns dias)</li>
            </ol>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">3</span>
                <span>Criar Aplicativo no Facebook Developer</span>
            </div>
            
            <ol>
                <li>Acesse <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                <li>Fa√ßa login com sua conta do Facebook</li>
                <li>Clique em "Meus Aplicativos"</li>
                <li>Clique em "Criar Aplicativo"</li>
                <li>Selecione o tipo de aplicativo: "Empresa" ou "Neg√≥cios"</li>
                <li>D√™ um nome ao seu aplicativo (ex: "Meu WhatsApp Business")</li>
                <li>Clique em "Criar Aplicativo"</li>
            </ol>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">4</span>
                <span>Configurar o Aplicativo para WhatsApp</span>
            </div>
            
            <ol>
                <li>No painel do seu aplicativo, clique em "Configura√ß√£o" > "B√°sico"</li>
                <li>Em "Dom√≠nios do Aplicativo", adicione o dom√≠nio onde sua aplica√ß√£o estar√° hospedada</li>
                <li>Na se√ß√£o "Produtos", clique em "Adicionar Produto"</li>
                <li>Procure por "WhatsApp" e clique em "Configurar"</li>
            </ol>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">5</span>
                <span>Obter o Business Token (Access Token)</span>
            </div>
            
            <ol>
                <li>No painel do seu aplicativo, v√° para "WhatsApp" > "Configura√ß√£o"</li>
                <li>Clique em "Gerenciar N√∫meros de Telefone"</li>
                <li>Clique em "Adicionar N√∫mero de Telefone"</li>
                <li>Selecione sua conta Business Manager</li>
                <li>Clique em "Gerar Token Tempor√°rio"</li>
                <li>Copie o token gerado - este √© o seu <strong>Business Token</strong></li>
            </ol>
            
            <div class="field-info">
                <h4>‚ÑπÔ∏è O que √© o Business Token?</h4>
                <p>O Business Token (tamb√©m chamado de Access Token) √© uma chave de autentica√ß√£o que permite que sua aplica√ß√£o se comunique com a API do WhatsApp Business. Ele √© necess√°rio para todas as requisi√ß√µes √† API.</p>
            </div>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">6</span>
                <span>Registrar N√∫mero de Telefone</span>
            </div>
            
            <ol>
                <li>Na se√ß√£o "WhatsApp" > "Configura√ß√£o", clique em "Gerenciar N√∫meros de Telefone"</li>
                <li>Clique em "Adicionar N√∫mero de Telefone"</li>
                <li>Insira um n√∫mero de telefone v√°lido que n√£o esteja sendo usado em outro aplicativo do WhatsApp</li>
                <li>Escolha o m√©todo de verifica√ß√£o (SMS ou chamada)</li>
                <li>Insira o c√≥digo de verifica√ß√£o quando recebido</li>
                <li>Ap√≥s a verifica√ß√£o, voc√™ ver√° o n√∫mero registrado com um ID - este √© o seu <strong>Phone Number ID</strong></li>
            </ol>
            
            <div class="field-info">
                <h4>‚ÑπÔ∏è O que √© o Phone Number ID?</h4>
                <p>O Phone Number ID √© um identificador √∫nico atribu√≠do pelo Facebook ao n√∫mero de telefone registrado no WhatsApp Business API. Ele √© usado para identificar qual n√∫mero enviar√° e receber√° mensagens.</p>
            </div>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">7</span>
                <span>Configurar Webhook</span>
            </div>
            
            <ol>
                <li>No painel do WhatsApp, v√° para "Configura√ß√£o" > "Webhooks"</li>
                <li>Clique em "Editar URL de Callback"</li>
                <li>Insira a URL do webhook:
                    <div class="code-block">
                        http://SEU_IP:8001/api/whatsapp/webhook
                    </div>
                </li>
                <li>Insira o token de verifica√ß√£o (use o padr√£o: whatsapp_agent_v2)</li>
                <li>Clique em "Verificar e Salvar"</li>
                <li>Ap√≥s a verifica√ß√£o bem-sucedida, clique em "Gerenciar assinaturas de webhook"</li>
                <li>Marque as caixas para "messages" e "message_templates"</li>
                <li>Clique em "Confirmar"</li>
            </ol>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">8</span>
                <span>Configurar no WhatsApp Voice Agent V2</span>
            </div>
            
            <ol>
                <li>Inicie o WhatsApp Voice Agent V2</li>
                <li>Acesse a aba "WhatsApp" na interface</li>
                <li>Preencha os campos:
                    <ul>
                        <li><strong>Business Token:</strong> Cole o token obtido no passo 5</li>
                        <li><strong>Phone Number ID:</strong> Cole o ID obtido no passo 6</li>
                    </ul>
                </li>
                <li>Clique em "Gerar QR Code"</li>
                <li>Use o bot√£o "Testar Conex√£o" para verificar se tudo est√° configurado corretamente</li>
            </ol>
            
            <div class="field-explanation">
                <div class="field-card">
                    <h3>Business Token</h3>
                    <p><strong>Onde encontrar:</strong> Facebook Developer > Seu App > WhatsApp > Configura√ß√£o</p>
                    <p><strong>Formato:</strong> EAAK... (string longa come√ßando com EAAK)</p>
                    <p><strong>Exemplo:</strong> EAAK1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef</p>
                </div>
                
                <div class="field-card">
                    <h3>Phone Number ID</h3>
                    <p><strong>Onde encontrar:</strong> Facebook Developer > Seu App > WhatsApp > Configura√ß√£o > Gerenciar N√∫meros</p>
                    <p><strong>Formato:</strong> N√∫mero (apenas d√≠gitos)</p>
                    <p><strong>Exemplo:</strong> 123456789012345</p>
                </div>
            </div>
        </div>

        <div class="warning-note">
            <h3>‚ö†Ô∏è Avisos Importantes</h3>
            <ul>
                <li><strong>N√∫mero de telefone exclusivo:</strong> O n√∫mero usado para o WhatsApp Business API n√£o pode estar em uso em nenhum outro aplicativo do WhatsApp</li>
                <li><strong>Verifica√ß√£o:</strong> O n√∫mero deve ser verificado atrav√©s de SMS ou chamada</li>
                <li><strong>Token tempor√°rio:</strong> O Business Token tem validade limitada. Para produ√ß√£o, configure um token de longa dura√ß√£o</li>
                <li><strong>Aprova√ß√£o:</strong> A conta Business e o aplicativo podem levar alguns dias para serem aprovados</li>
            </ul>
        </div>

        <div class="success-note">
            <h3>‚úÖ Dicas para Sucesso</h3>
            <ul>
                <li><strong>Use ambiente de teste:</strong> Durante o desenvolvimento, utilize n√∫meros de teste para evitar bloqueios</li>
                <li><strong>Token de longa dura√ß√£o:</strong> Para produ√ß√£o, gere um token de longa dura√ß√£o no Facebook Developer</li>
                <li><strong>Documenta√ß√£o oficial:</strong> Consulte sempre a <a href="https://developers.facebook.com/docs/whatsapp/business-management-api/getting-started" target="_blank">documenta√ß√£o oficial</a></li>
                <li><strong>Logs:</strong> Verifique os logs do WhatsApp Voice Agent para identificar erros de configura√ß√£o</li>
            </ul>
        </div>

        <div class="step-card">
            <div class="step-title">
                <span class="step-number">9</span>
                <span>Testar a Integra√ß√£o</span>
            </div>
            
            <ol>
                <li>Envie uma mensagem para o n√∫mero registrado no WhatsApp Business</li>
                <li>Verifique se a mensagem aparece nos logs do WhatsApp Voice Agent</li>
                <li>Confirme se a resposta autom√°tica √© enviada de volta</li>
                <li>Verifique o banco de dados para garantir que as mensagens est√£o sendo salvas</li>
            </ol>
        </div>

        <div class="footer">
            <h3>‚úÖ Configura√ß√£o Conclu√≠da!</h3>
            <p>Ap√≥s seguir todos os passos acima, voc√™ ter√° configurado com sucesso a integra√ß√£o do WhatsApp Business API com o WhatsApp Voice Agent V2.</p>
            <p>Se encontrar problemas, verifique os logs da aplica√ß√£o e consulte a documenta√ß√£o oficial do Facebook Developers.</p>
            
            <div style="margin-top: 20px;">
                <a href="http://localhost:8001" class="btn" target="_blank">Abrir WhatsApp Voice Agent V2</a>
                <a href="https://developers.facebook.com/docs/whatsapp/business-management-api/getting-started" class="btn btn-secondary" target="_blank">Documenta√ß√£o Oficial</a>
            </div>
        </div>
    </div>

    <script>
        // Copy code functionality
        function copyCode(button) {
            const codeBlock = button.nextElementSibling || button.parentElement;
            const text = codeBlock.textContent.replace('Copiar', '').trim();
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copiado!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }
    </script>
</body>
</html>